
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ember.js - Routing: Loading / Error Substates</title>
    <meta property="st:title" content="Routing: Loading / Error Substates" />
    <link rel="shortcut icon" href="/images/favicon.png" />
    <!--[if lte IE 7 ]><link href="../../../stylesheets/fonts/fontello-ie7.css" rel="stylesheet" type="text/css" /><![endif]-->
    <link href="../../../stylesheets/site.css" rel="stylesheet" type="text/css" />
    <link href="/blog/feed.xml" rel="alternate" type="application/atom+xml" title="Ember.js - Blog" />
    
  </head>

  <body class="guides guides_routing guides_routing_loading-and-error-substates guides_routing_loading-and-error-substates_index">

    <script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
    <script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type="text/javascript"></script>

    <!--[if lt IE 9]>
      <script type="text/javascript" src="/javascripts/common-old-ie.js"></script>
    <![endif]-->
    <!--[if gte IE 9]><!-->
      <script type="text/javascript" src="/javascripts/common-modern.js"></script>
    <!--<![endif]-->

    <div id="header">
      <div id="wrapper">
        <a id="logo" href="/">&nbsp;</a>
        <ul id="nav">
          <li><a href="/about">about</a></li>
          <li class="active"><a href="/guides">guides</a></li>
          <li><a href="/api">api</a></li>
          <li><a href="/community">community</a></li>
          <li><a href="/blog">blog</a></li>
          <li><a href="/builds">builds</a></li>
          <li id="search">
            <form>
              <input type="text" id="st-search-input" class="st-search-input" />
            </form>
            <div id="st-results-container"></div>
          </li>
        </ul>

        <div id="github">
          <a href="https://github.com/emberjs/ember.js"><i class="icon-fork"></i>Fork Us!</a>
        </div>
      </div>
    </div>

    

    <div id="content-wrapper">
        <div id="sidebar">
              <ol id="toc-list">
          <li class="level-1">
            <a href="../../getting-started/">Getting Started</a>
            <ol>
        
            <li class="level-3">
              <a href="../../getting-started/">Getting Started</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/planning-the-application/">Planning The Application</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/creating-a-static-mockup/">Creating a Static Mockup</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/obtaining-emberjs-and-dependencies/">Obtaining Ember.js and Dependencies</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/adding-a-route-and-template/">Adding the First Route and Template</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/modeling-data/">Modeling Data</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/using-fixtures/">Using Fixtures</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/displaying-model-data/">Displaying Model Data</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/displaying-a-models-completeness/">Displaying a Model's Complete State</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/creating-a-new-model/">Creating a New Model Instance</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/marking-a-model-as-complete-incomplete/">Marking a Model as Complete or Incomplete</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/displaying-the-number-of-incomplete-todos/">Displaying the Number of Incomplete Todos</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/toggle-todo-editing-state/">Toggling between Showing and Editing States</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/accepting-edits/">Accepting Edits</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/deleting-todos/">Deleting a Model</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/adding-child-routes/">Adding Child Routes</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/show-only-incomplete-todos/">Transitioning to Show Only Incomplete Todos</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/show-only-complete-todos/">Transitioning to Show Only Complete Todos</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/show-all-todos-again/">Transitioning back to Show All Todos</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/display-a-button-to-remove-completed-todos/">Displaying a Button to Remove All Completed Todos</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/show-when-all-todos-are-complete/">Indicating When All Todos Are Complete</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/toggle-all-todos/">Toggling All Todos Between Complete and Incomplete</a>
            </li>
          
            <li class="level-3">
              <a href="../../getting-started/using-other-adapters/">Replacing the Fixture Adapter with Another Adapter</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../getting-ember/">Getting Ember</a>
            <ol>
        
            <li class="level-3">
              <a href="../../getting-ember/">Getting Ember</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../concepts/core-concepts/">Concepts</a>
            <ol>
        
            <li class="level-3">
              <a href="../../concepts/core-concepts/">Core Concepts</a>
            </li>
          
            <li class="level-3">
              <a href="../../concepts/naming-conventions/">Naming Conventions</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../object-model/classes-and-instances/">The Object Model</a>
            <ol>
        
            <li class="level-3">
              <a href="../../object-model/classes-and-instances/">Classes and Instances</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/computed-properties/">Computed Properties</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/computed-properties-and-aggregate-data/">Computed Properties and Aggregate Data with @each</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/observers/">Observers</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/bindings/">Bindings</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/reopening-classes-and-instances/">Reopening Classes and Instances</a>
            </li>
          
            <li class="level-3">
              <a href="../../object-model/what-do-i-use-when/">Bindings, Observers, Computed Properties: What Do I Use When?</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../application/">Application</a>
            <ol>
        
            <li class="level-3">
              <a href="../../application/">Introduction</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../templates/the-application-template/">Templates</a>
            <ol>
        
            <li class="level-3">
              <a href="../../templates/the-application-template/">The Application Template</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/handlebars-basics/">Handlebars Basics</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/conditionals/">Conditionals</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/displaying-a-list-of-items/">Displaying a List of Items</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/binding-element-attributes/">Binding Element Attributes</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/binding-element-class-names/">Binding Element Class Names</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/links/">Links</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/actions/">Actions</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/input-helpers/">Input Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/development-helpers/">Development Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/rendering-with-helpers/">Rendering with Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="../../templates/writing-helpers/">Writing Helpers</a>
            </li>
          </ol></li>
          <li class="level-1 selected">
            <a href="../">Routing</a>
            <ol class='selected'>
        
            <li class="level-3">
              <a href="../">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../defining-your-routes/">Defining Your Routes</a>
            </li>
          
            <li class="level-3">
              <a href="../generated-objects/">Generated Objects</a>
            </li>
          
            <li class="level-3">
              <a href="../specifying-a-routes-model/">Specifying a Route's Model</a>
            </li>
          
            <li class="level-3">
              <a href="../setting-up-a-controller/">Setting Up a Controller</a>
            </li>
          
            <li class="level-3">
              <a href="../rendering-a-template/">Rendering a Template</a>
            </li>
          
            <li class="level-3">
              <a href="../redirection/">Redirecting</a>
            </li>
          
            <li class="level-3">
              <a href="../specifying-the-location-api/">Specifying the URL Type</a>
            </li>
          
            <li class="level-3">
              <a href="../query-params/">Query Parameters</a>
            </li>
          
            <li class="level-3">
              <a href="../asynchronous-routing/">Asynchronous Routing</a>
            </li>
          
            <li class="level-3 sub-selected">
              <a href="./">Loading / Error Substates</a>
            </li>
          
            <li class="level-3">
              <a href="../preventing-and-retrying-transitions/">Preventing and Retrying Transitions</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../components/">Components</a>
            <ol>
        
            <li class="level-3">
              <a href="../../components/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/defining-a-component/">Defining a Component</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/passing-properties-to-a-component/">Passing Properties to a Component</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/wrapping-content-in-a-component/">Wrapping Content in a Component</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/customizing-a-components-element/">Customizing a Component's Element</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/handling-user-interaction-with-actions/">Handling User Interaction with Actions</a>
            </li>
          
            <li class="level-3">
              <a href="../../components/sending-actions-from-components-to-your-application/">Sending Actions from Components to Your Application</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../controllers/">Controllers</a>
            <ol>
        
            <li class="level-3">
              <a href="../../controllers/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../../controllers/representing-a-single-model-with-objectcontroller/">Representing a Single Model with ObjectController</a>
            </li>
          
            <li class="level-3">
              <a href="../../controllers/representing-multiple-models-with-arraycontroller/">Representing Multiple Models with ArrayController</a>
            </li>
          
            <li class="level-3">
              <a href="../../controllers/dependencies-between-controllers/">Managing Dependencies Between Controllers</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../models/">Models</a>
            <ol>
        
            <li class="level-3">
              <a href="../../models/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/defining-models/">Defining Models</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/creating-and-deleting-records/">Creating and Deleting Records</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/pushing-records-into-the-store/">Pushing Records into the Store</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/persisting-records/">Persisting Records</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/finding-records/">Finding Records</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/working-with-records/">Working with Records</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/the-fixture-adapter/">Using Fixtures</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/the-rest-adapter/">The Rest Adapter</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/connecting-to-an-http-server/">Connecting to an HTTP Server</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/handling-metadata/">Handling Metadata</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/customizing-adapters/">Customizing Adapters</a>
            </li>
          
            <li class="level-3">
              <a href="../../models/frequently-asked-questions/">Frequently Asked Questions</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../views/">Views</a>
            <ol>
        
            <li class="level-3">
              <a href="../../views/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/defining-a-view/">Defining a View</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/handling-events/">Handling Events</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/inserting-views-in-templates/">Inserting Views in Templates</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/adding-layouts-to-views/">Adding Layouts to Views</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/customizing-a-views-element/">Customizing a View's Element</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/built-in-views/">Built-in Views</a>
            </li>
          
            <li class="level-3">
              <a href="../../views/manually-managing-view-hierarchy/">Manually Managing View Hierarchy</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../enumerables/">Enumerables</a>
            <ol>
        
            <li class="level-3">
              <a href="../../enumerables/">Introduction</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../testing/">Testing</a>
            <ol>
        
            <li class="level-3">
              <a href="../../testing/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="../../testing/integration/">Integration Tests</a>
            </li>
          
            <li class="level-3">
              <a href="../../testing/test-helpers/">Test Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="../../testing/testing-user-interaction/">Testing User Interaction</a>
            </li>
          
            <li class="level-3">
              <a href="../../testing/unit-testing-basics/">Unit Testing Basics</a>
            </li>
          
            <li class="level-3">
              <a href="../../testing/unit-test-helpers/">Unit Test Helpers</a>
            </li>
          
            <li class="level-3">
              <a href="../../testing/testing-components/">Testing Components</a>
            </li>
          
            <li class="level-3">
              <a href="../../testing/testing-controllers/">Testing Controllers</a>
            </li>
          
            <li class="level-3">
              <a href="../../testing/testing-routes/">Testing Routes</a>
            </li>
          
            <li class="level-3">
              <a href="../../testing/testing-models/">Testing Models</a>
            </li>
          
            <li class="level-3">
              <a href="../../testing/test-runners/">Automating Tests with Runners</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../configuring-ember/disabling-prototype-extensions/">Configuring Ember.js</a>
            <ol>
        
            <li class="level-3">
              <a href="../../configuring-ember/disabling-prototype-extensions/">Disabling Prototype Extensions</a>
            </li>
          
            <li class="level-3">
              <a href="../../configuring-ember/embedding-applications/">Embedding Applications</a>
            </li>
          
            <li class="level-3">
              <a href="../../configuring-ember/feature-flags/">Feature Flags</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../cookbook/">Cookbook</a>
            <ol>
        
            <li class="level-3">
              <a href="../../cookbook/">Introduction</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/contributing.html">Contributing</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/user_interface_and_interaction.html">User Interface and Interaction</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/event_handling_and_data_binding.html">Event Handling & Data Binding</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/helpers_and_components.html">Helpers & Components</a>
            </li>
          
            <li class="level-3">
              <a href="/guides/cookbook/working_with_objects.html">Working with Objects</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="/guides/deprecations.html">Deprecations</a>
            <ol>
        
            <li class="level-3">
              <a href="/guides/deprecations.html">Deprecations/index</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../understanding-ember/the-view-layer/">Understanding Ember.js</a>
            <ol>
        
            <li class="level-3">
              <a href="../../understanding-ember/the-view-layer/">The View Layer</a>
            </li>
          
            <li class="level-3">
              <a href="../../understanding-ember/managing-asynchrony/">Managing Asynchrony</a>
            </li>
          
            <li class="level-3">
              <a href="../../understanding-ember/keeping-templates-up-to-date/">Keeping Templates Up-to-Date</a>
            </li>
          
            <li class="level-3">
              <a href="../../understanding-ember/debugging/">Debugging</a>
            </li>
          
            <li class="level-3">
              <a href="../../understanding-ember/run-loop/">The Run Loop</a>
            </li>
          
            <li class="level-3">
              <a href="../../understanding-ember/dependency-injection-and-service-lookup/">Dependency Injection & Service Lookup</a>
            </li>
          </ol></li>
          <li class="level-1">
            <a href="../../contributing/adding-new-features/">Contributing to Ember.js</a>
            <ol>
        
            <li class="level-3">
              <a href="../../contributing/adding-new-features/">Adding New Features</a>
            </li>
          
            <li class="level-3">
              <a href="../../contributing/repositories/">Repositories</a>
            </li>
          </ol></li></ol>

          <div id="back-to-top"><a id="back-top-top" href="#">&#11014; Back to Top</a></div>
        </div>
      <div id="content" class="has-sidebar">
        
  <div class="chapter">
    
        <h1>Loading / Error Substates
          <a href="https://github.com/emberjs/website/tree/master/source/guides/routing/loading-and-error-substates.md" target="_blank" class="edit-page icon-pencil">Edit Page</a>
        </h1>
      
    <hr>
    <p>In addition to the techniques described in the
<a href="/guides/routing/asynchronous-routing/">Asynchronous Routing Guide</a>,
the Ember Router provides powerful yet overridable
conventions for customizing asynchronous transitions
between routes by making use of <code>error</code> and <code>loading</code>
substates.</p>
<h2 class='anchorable-toc' id='toc_code-loading-code-substates'><code>loading</code> substates</h2>
<p>The Ember Router allows you to return promises from the various
<code>beforeModel</code>/<code>model</code>/<code>afterModel</code> hooks in the course of a transition
(described <a href="/guides/routing/asynchronous-routing/">here</a>).
These promises pause the transition until they fulfill, at which point
the transition will resume.</p>

<p>Consider the following:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
</pre></td>
  <td class="code"><pre>App.Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() { <span class="comment">// -&gt; FooRoute</span>
    <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">slowModel</span><span class="delimiter">'</span></span>);        <span class="comment">// -&gt; FooSlowModelRoute</span>
  });
});

App.FooSlowModelRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>() {
    <span class="keyword">return</span> somePromiseThatTakesAWhileToResolve();
  }
});
</pre></td>
</tr></table>
</div></div>
<p>If you navigate to <code>foo/slow_model</code>, and in <code>FooSlowModelRoute#model</code>,
you return an AJAX query promise that takes a long time to complete.
During this time, your UI isn&#39;t really giving you any feedback as to
what&#39;s happening; if you&#39;re entering this route after a full page
refresh, your UI will be entirely blank, as you have not actually
finished fully entering any route and haven&#39;t yet displayed any
templates; if you&#39;re navigating to <code>foo/slow_model</code> from another
route, you&#39;ll continue to see the templates from the previous route
until the model finish loading, and then, boom, suddenly all the
templates for <code>foo/slow_model</code> load.</p>

<p>So, how can we provide some visual feedback during the transition?</p>

<p>Ember provides a default implementation of the <code>loading</code> process that implements
the following loading substate behavior.</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre>App.Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() {       <span class="comment">// -&gt; FooRoute</span>
    <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">foo.bar</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() { <span class="comment">// -&gt; FooBarRoute</span>
      <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">baz</span><span class="delimiter">'</span></span>);                  <span class="comment">// -&gt; FooBarBazRoute</span>
    });
  });
});
</pre></td>
</tr></table>
</div></div>
<p>If a route with the path <code>foo.bar.baz</code> returns a promise that doesn&#39;t immediately
resolve, Ember will try to find a <code>loading</code> route in the hierarchy
above <code>foo.bar.baz</code> that it can transition into, starting with
<code>foo.bar.baz</code>&#39;s sibling:</p>

<ol>
<li><code>foo.bar.loading</code></li>
<li><code>foo.loading</code></li>
<li><code>loading</code></li>
</ol>

<p>Ember will find a loading route at the above location if either a) a
Route subclass has been defined for such a route, e.g.</p>

<ol>
<li><code>App.FooBarLoadingRoute</code></li>
<li><code>App.FooLoadingRoute</code></li>
<li><code>App.LoadingRoute</code></li>
</ol>

<p>or b) a properly-named loading template has been found, e.g.</p>

<ol>
<li><code>foo/bar/loading</code></li>
<li><code>foo/loading</code></li>
<li><code>loading</code></li>
</ol>

<p>During a slow asynchronous transition, Ember will transition into the
first loading sub-state/route that it finds, if one exists. The
intermediate transition into the loading substate happens immediately
(synchronously), the URL won&#39;t be updated, and, unlike other transitions
that happen while another asynchronous transition is active, the
currently active async transition won&#39;t be aborted.</p>

<p>After transitioning into a loading substate, the corresponding template
for that substate, if present, will be rendered into the main outlet of
the parent route, e.g. <code>foo.bar.loading</code>&#39;s template would render into
<code>foo.bar</code>&#39;s outlet. (This isn&#39;t particular to loading routes; all
routes behave this way by default.)</p>

<p>Once the main async transition into <code>foo.bar.baz</code> completes, the loading
substate will be exited, its template torn down, <code>foo.bar.baz</code> will be
entered, and its templates rendered.</p>
<h3 class='anchorable-toc' id='toc_eager-vs-lazy-async-transitions'>Eager vs. Lazy Async Transitions</h3>
<p>Loading substates are optional, but if you provide one,
you are essentially telling Ember that you
want this async transition to be &quot;eager&quot;; in the absence of destination
route loading substates, the router will &quot;lazily&quot; remain on the pre-transition route
while all of the destination routes&#39; promises resolve, and only fully
transition to the destination route (and renders its templates, etc.)
once the transition is complete. But once you provide a destination
route loading substate, you are opting into an &quot;eager&quot; transition, which
is to say that, unlike the &quot;lazy&quot; default, you will eagerly exit the
source routes (and tear down their templates, etc) in order to
transition into this substate. URLs always update immediately unless the
transition was aborted or redirected within the same run loop.</p>

<p>This has implications on error handling, i.e. when a transition into
another route fails, a lazy transition will (by default) just remain on the
previous route, whereas an eager transition will have already left the
pre-transition route to enter a loading substate.</p>
<h3 class='anchorable-toc' id='toc_the-code-loading-code-event'>The <code>loading</code> event</h3>
<p>If you return a promise from the various <code>beforeModel</code>/<code>model</code>/<code>afterModel</code> hooks,
and it doesn&#39;t immediately resolve, a <code>loading</code> event will be fired on that route
and bubble upward to <code>ApplicationRoute</code>.</p>

<p>If the <code>loading</code> handler is not defined at the specific route,
the event will continue to bubble above a transition&#39;s pivot
route, providing the <code>ApplicationRoute</code> the opportunity to manage it.</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
</pre></td>
  <td class="code"><pre>App.FooSlowModelRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>() {
    <span class="keyword">return</span> somePromiseThatTakesAWhileToResolve();
  },
  <span class="key">actions</span>: {
    <span class="function">loading</span>: <span class="keyword">function</span>(transition, originRoute) {
      <span class="comment">//displayLoadingSpinner();</span>

      <span class="comment">// Return true to bubble this event to `FooRoute`</span>
      <span class="comment">// or `ApplicationRoute`.</span>
      <span class="keyword">return</span> <span class="predefined-constant">true</span>;
    }
  }
});
</pre></td>
</tr></table>
</div></div>
<p>The <code>loading</code> handler provides the ability to decide what to do during
the loading process. If the last loading handler is not defined
or returns <code>true</code>, Ember will perform the loading substate behavior.</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
</pre></td>
  <td class="code"><pre>App.ApplicationRoute = Ember.Route.extend({
  <span class="key">actions</span>: {
    <span class="function">loading</span>: <span class="keyword">function</span>(transition, originRoute) {
      displayLoadingSpinner();

      <span class="comment">// substate implementation when returning `true`</span>
      <span class="keyword">return</span> <span class="predefined-constant">true</span>;
    }
  }
});
</pre></td>
</tr></table>
</div></div><h2 class='anchorable-toc' id='toc_code-error-code-substates'><code>error</code> substates</h2>
<p>Ember provides an analogous approach to <code>loading</code> substates in
the case of errors encountered during a transition.</p>

<p>Similar to how the default <code>loading</code> event handlers are implemented,
the default <code>error</code> handlers will look for an appropriate error substate to
enter, if one can be found.</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
</pre></td>
  <td class="code"><pre>App.Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">articles</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>() { <span class="comment">// -&gt; ArticlesRoute</span>
    <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">overview</span><span class="delimiter">'</span></span>);              <span class="comment">// -&gt; ArticlesOverviewRoute</span>
  });
});
</pre></td>
</tr></table>
</div></div>
<p>For instance, an error thrown or rejecting promise returned from
<code>ArticlesOverviewRoute#model</code> (or <code>beforeModel</code> or <code>afterModel</code>)
will look for:</p>

<ol>
<li>Either <code>ArticlesErrorRoute</code> or <code>articles/error</code> template</li>
<li>Either <code>ErrorRoute</code> or <code>error</code> template</li>
</ol>

<p>If one of the above is found, the router will immediately transition into
that substate (without updating the URL). The &quot;reason&quot; for the error
(i.e. the exception thrown or the promise reject value) will be passed
to that error state as its <code>model</code>.</p>

<p>If no viable error substates can be found, an error message will be
logged.</p>
<h3 class='anchorable-toc' id='toc_code-error-code-substates-with-dynamic-segments'><code>error</code> substates with dynamic segments</h3>
<p>Routes with dynamic segments are often mapped to a mental model of &quot;two
separate levels.&quot; Take for example:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre>App.Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>, {<span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">/foo/:id</span><span class="delimiter">'</span></span>}, <span class="keyword">function</span>() {
    <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">baz</span><span class="delimiter">'</span></span>);
  });
});

App.FooRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>(params) {
    <span class="keyword">return</span> <span class="keyword">new</span> Ember.RSVP.Promise(<span class="keyword">function</span>(resolve, reject) {
       reject(<span class="string"><span class="delimiter">&quot;</span><span class="content">Error</span><span class="delimiter">&quot;</span></span>);
    });
  }
});
</pre></td>
</tr></table>
</div></div>
<p>In the URL hierarchy you would visit <code>/foo/12</code> which would result in rendering
the <code>foo</code> template into the <code>application</code> template&#39;s <code>outlet</code>. In the event of
an error while attempting to load the <code>foo</code> route you would also render the
top-level <code>error</code> template into the <code>application</code> template&#39;s <code>outlet</code>. This is
intentionally parallel behavior as the <code>foo</code> route is never successfully
entered. In order to create a <code>foo</code> scope for errors and render <code>foo/error</code>
into <code>foo</code>&#39;s <code>outlet</code> you would need to split the dynamic segment:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
</pre></td>
  <td class="code"><pre>App.Router.map(<span class="keyword">function</span>() {
  <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">foo</span><span class="delimiter">'</span></span>, {<span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">/foo</span><span class="delimiter">'</span></span>}, <span class="keyword">function</span>() {
    <span class="local-variable">this</span>.resource(<span class="string"><span class="delimiter">'</span><span class="content">elem</span><span class="delimiter">'</span></span>, {<span class="key">path</span>: <span class="string"><span class="delimiter">'</span><span class="content">:id</span><span class="delimiter">'</span></span>}, <span class="keyword">function</span>() {
      <span class="local-variable">this</span>.route(<span class="string"><span class="delimiter">'</span><span class="content">baz</span><span class="delimiter">'</span></span>);
    });
  });
});
</pre></td>
</tr></table>
</div></div>
<p><a href="http://jsbin.com/tujepi">Example JSBin</a></p>
<h3 class='anchorable-toc' id='toc_the-code-error-code-event'>The <code>error</code> event</h3>
<p>If <code>ArticlesOverviewRoute#model</code> returns a promise that rejects (because, for
instance, the server returned an error, or the user isn&#39;t logged in,
etc.), an <code>error</code> event will fire on <code>ArticlesOverviewRoute</code> and bubble upward.
This <code>error</code> event can be handled and used to display an error message,
redirect to a login page, etc.</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
14
15
16
17
18
19
</pre></td>
  <td class="code"><pre>App.ArticlesOverviewRoute = Ember.Route.extend({
  <span class="function">model</span>: <span class="keyword">function</span>(params) {
    <span class="keyword">return</span> <span class="keyword">new</span> Ember.RSVP.Promise(<span class="keyword">function</span>(resolve, reject) {
       reject(<span class="string"><span class="delimiter">&quot;</span><span class="content">Error</span><span class="delimiter">&quot;</span></span>);
    });
  },
  <span class="key">actions</span>: {
    <span class="function">error</span>: <span class="keyword">function</span>(error, transition) {

      <span class="keyword">if</span> (error &amp;&amp; error.status === <span class="integer">400</span>) {
        <span class="comment">// error substate and parent routes do not handle this error</span>
        <span class="keyword">return</span> <span class="local-variable">this</span>.transitionTo(<span class="string"><span class="delimiter">'</span><span class="content">modelNotFound</span><span class="delimiter">'</span></span>);
      }

      <span class="comment">// Return true to bubble this event to any parent route.</span>
      <span class="keyword">return</span> <span class="predefined-constant">true</span>;
    }
  }
});
</pre></td>
</tr></table>
</div></div>
<p>In analogy with the <code>loading</code> event, you could manage the <code>error</code> event
at the Application level to perform any app logic and based on the
result of the last <code>error</code> handler, Ember will decide if substate behavior
must be performed or not.</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre>App.ApplicationRoute = Ember.Route.extend({
  <span class="key">actions</span>: {
    <span class="function">error</span>: <span class="keyword">function</span>(error, transition) {

      <span class="comment">// Manage your errors</span>
      Ember.onerror(error);

      <span class="comment">// substate implementation when returning `true`</span>
      <span class="keyword">return</span> <span class="predefined-constant">true</span>;

    }
  }
});
</pre></td>
</tr></table>
</div></div><h2 class='anchorable-toc' id='toc_legacy-code-loadingroute-code'>Legacy <code>LoadingRoute</code></h2>
<p>Previous versions of Ember (somewhat inadvertently) allowed you to define a global <code>LoadingRoute</code>
which would be activated whenever a slow promise was encountered during
a transition and exited upon completion of the transition. Because the
<code>loading</code> template rendered as a top-level view and not within an
outlet, it could be used for little more than displaying a loading
spinner during slow transitions. Loading events/substates give you far
more control, but if you&#39;d like to emulate something similar to the legacy
<code>LoadingRoute</code> behavior, you could do as follows:</p>
<div class="highlight js "><div class="ribbon"></div><div class="scroller"><table class="CodeRay"><tr>
  <td class="line-numbers"><pre>1
2
3
4
5
6
7
8
9
<strong>10</strong>
11
12
13
</pre></td>
  <td class="code"><pre>App.LoadingView = Ember.View.extend({
  <span class="key">templateName</span>: <span class="string"><span class="delimiter">'</span><span class="content">global-loading</span><span class="delimiter">'</span></span>,
  <span class="key">elementId</span>: <span class="string"><span class="delimiter">'</span><span class="content">global-loading</span><span class="delimiter">'</span></span>
});

App.ApplicationRoute = Ember.Route.extend({
  <span class="key">actions</span>: {
    <span class="function">loading</span>: <span class="keyword">function</span>() {
      <span class="keyword">var</span> view = <span class="local-variable">this</span>.container.lookup(<span class="string"><span class="delimiter">'</span><span class="content">view:loading</span><span class="delimiter">'</span></span>).append();
      <span class="local-variable">this</span>.router.one(<span class="string"><span class="delimiter">'</span><span class="content">didTransition</span><span class="delimiter">'</span></span>, view, <span class="string"><span class="delimiter">'</span><span class="content">destroy</span><span class="delimiter">'</span></span>);
    }
  }
});
</pre></td>
</tr></table>
</div></div>
<p><a href="http://jsbin.com/leruqa">Example JSBin</a></p>

<p>This will, like the legacy <code>LoadingRoute</code>, append a top-level view when the
router goes into a loading state, and tear down the view once the
transition finishes.</p>

    
      <footer>
        
          <a class="previous-guide" href="../guides/routing/asynchronous-routing">
            ← Asynchronous Routing
          </a>
         
        <a class="next-guide" href="/guides/routing/preventing-and-retrying-transitions">
          Preventing and Retrying Transitions →
        </a>
      
      </footer>
      
  </div>

      </div>
    </div>

    <div id="footer">
      <div id="footer-wrapper">
        <div class="info">
          Copyright 2015 <a href="http://tilde.io">Tilde Inc.</a><br>
          <a href="/team">Core Team</a> | <a href="/sponsors">Sponsors</a> | <a href="/legal">Legal</a></br>
          <a href="/guidelines">Community Guidelines</a>
        </div>
        <div class="statement">Ember.js is free, open source and always will be.</div>
        <div class="links">
          <a class="twitter" href="http://twitter.com/emberjs">
            <i class="icon-twitter"></i><span>Twitter</span>
          </a>
          <a class="github" href="https://github.com/emberjs/ember.js">
            <i class="icon-github"></i><span>GitHub</span>
          </a>
          <a class="googleplus" href="https://plus.google.com/communities/106387049790387471205">
            <i class="icon-gplus"></i><span>Google+</span>
          </a>
        </div>
      </div>
    </div>

        <script type="text/javascript" src="/javascripts/guides.js"></script>
    <script src="http://static.jsbin.com/js/embed.js"></script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
      _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
      _gaq.push(['_setAccount', 'UA-27675533-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </body>
</html>
